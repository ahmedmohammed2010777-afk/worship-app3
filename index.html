<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø±Ø§Ø¨ Ø¹Ø§Ø¦Ù„ØªÙŠ 2026 - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ù„Ø­Ù…ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Reem+Kufi:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #1a4d2e; --gold: #c5a059; --bg: #f9f6f0; --accent: #8e44ad; }
        body {
            font-family: 'Amiri', serif; background-color: var(--bg);
            background-image: url('https://www.transparenttextures.com/patterns/islamic-art.png');
            margin: 0; padding: 10px; color: #2c3e50;
        }
        .main-container {
            max-width: 850px; margin: auto; background: rgba(255,255,255,0.98);
            border: 3px double var(--gold); border-radius: 20px; padding: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        h1, h2, h3 { font-family: 'Reem Kufi', sans-serif; color: var(--primary); text-align: center; }

        .header-bar {
            background: var(--primary); color: white; padding: 15px;
            border-radius: 15px; border: 1px solid var(--gold); margin-bottom: 20px; text-align: center;
        }
        input[type="date"] { background: var(--gold); border: none; color: white; padding: 8px; border-radius: 8px; font-family: 'Amiri'; cursor: pointer; }

        /* Ø¨ÙˆØ¯ÙŠÙˆÙ… Ø§Ù„Ù…ØªÙ†Ø§ÙØ³ÙŠÙ† */
        .podium-container { display: flex; justify-content: center; align-items: flex-end; gap: 8px; margin: 40px 0; height: 180px; padding-bottom: 10px; border-bottom: 2px solid #eee; }
        .podium-step { background: var(--primary); color: white; width: 85px; text-align: center; border-radius: 10px 10px 2px 2px; position: relative; border: 2px solid var(--gold); }
        .p1 { height: 100%; background: linear-gradient(to top, #b8860b, var(--gold)); }
        .p2 { height: 75%; background: #bdc3c7; }
        .p3 { height: 55%; background: #cd7f32; }
        .p4 { height: 40%; background: #34495e; border-color: #95a5a6; }
        .podium-name { position: absolute; top: -35px; width: 100%; font-weight: bold; color: var(--primary); font-size: 0.85rem; }
        .podium-score { position: absolute; bottom: 5px; width: 100%; font-size: 0.75rem; color: #fff; }
        .podium-rem { position: absolute; top: 105%; width: 100%; font-size: 0.65rem; color: #8e44ad; font-weight: bold; line-height: 1.1; }

        /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…ØªÙ†Ø§ÙØ³ÙŠÙ† */
        .competitors-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-bottom: 25px; }
        .comp-card { background: white; border: 2px solid var(--gold); border-radius: 15px; padding: 12px; cursor: pointer; position: relative; transition: 0.3s; }
        .comp-card.active { border-color: var(--primary); box-shadow: 0 0 15px rgba(26, 77, 46, 0.3); background: #f0f7f2; transform: scale(1.03); }
        .score-tag { color: var(--gold); font-weight: bold; font-size: 1.2rem; }
        .rem-detail { font-size: 0.75rem; color: #c0392b; margin-top: 10px; line-height: 1.4; border-top: 1px solid #f1f1f1; padding-top: 5px; height: 60px; overflow-y: auto; }

        /* Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© */
        .prayer-options { display: flex; gap: 4px; }
        .opt-btn { font-size: 0.7rem; padding: 4px 6px; border-radius: 6px; border: 1px solid #ddd; cursor: pointer; background: #fff; flex: 1; text-align: center; }
        .opt-btn.selected { background: var(--primary); color: white; border-color: var(--primary); font-weight: bold; }
        .pts-badge { font-size: 0.65rem; display: block; color: var(--gold); }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .section-card { background: white; border: 1px solid #ddd; border-radius: 15px; padding: 15px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        .section-title { color: var(--primary); border-bottom: 2px solid var(--gold); margin-bottom: 15px; font-weight: bold; font-size: 1.1rem; }
        .habit-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px dashed #eee; }
        .habit-row a { text-decoration: none; color: var(--primary); font-weight: bold; }

        /* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ© ÙˆØ§Ù„ØªØ­ÙÙŠØ² */
        .stats-card { background: var(--primary); color: white; border-radius: 15px; padding: 15px; margin-bottom: 20px; text-align: center; border: 1px solid var(--gold); }
        .motivation-text { font-style: italic; color: var(--gold); margin-top: 10px; font-weight: bold; }

        .chat-area { height: 120px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; border-radius: 10px; background: #fff; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="main-container">
    <h1>ğŸ•Œ Ù…Ø­Ø±Ø§Ø¨ Ø¹Ø§Ø¦Ù„ØªÙŠ</h1>

    <div class="header-bar">
        <input type="date" id="date-picker" onchange="updateView()">
        <div id="h-display" style="margin-top:8px; font-weight: bold; color: var(--gold);"></div>
    </div>

    <div class="stats-card">
        <h3>ğŸ“Š Ø­ØµØ§Ø¯ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ</h3>
        <div id="monthly-rankings" style="display: flex; justify-content: space-around; font-size: 0.9rem;"></div>
        <div id="motivation" class="motivation-text">"ÙˆÙÙŠ Ø°Ù„Ùƒ ÙÙ„ÙŠØªÙ†Ø§ÙØ³ Ø§Ù„Ù…ØªÙ†Ø§ÙØ³ÙˆÙ†"</div>
    </div>

    <h3>ğŸ† Ù…Ù†ØµØ© Ø§Ù„ØªØªÙˆÙŠØ¬ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h3>
    <div class="podium-container">
        <div class="podium-step p4"><div class="podium-name" id="rank-4">-</div><div class="podium-score" id="ps-4">0</div><div class="podium-rem" id="pr-4"></div>Ù¤</div>
        <div class="podium-step p2"><div class="podium-name" id="rank-2">-</div><div class="podium-score" id="ps-2">0</div><div class="podium-rem" id="pr-2"></div>Ù¢</div>
        <div class="podium-step p1"><div class="podium-name" id="rank-1">-</div><div class="podium-score" id="ps-1">0</div><div class="podium-rem" id="pr-1"></div>Ù¡</div>
        <div class="podium-step p3"><div class="podium-name" id="rank-3">-</div><div class="podium-score" id="ps-3">0</div><div class="podium-rem" id="pr-3"></div>Ù£</div>
    </div>

    <div class="competitors-grid">
        <div class="comp-card active" id="card-Ù…Ø­Ù…Ø¯" onclick="selectUser('Ù…Ø­Ù…Ø¯')">
            <div style="font-weight:bold; color:var(--primary);">Ø§Ù„Ø£Ø¨ Ù…Ø­Ù…Ø¯</div>
            <div class="score-tag" id="sc-Ù…Ø­Ù…Ø¯">0</div>
            <div class="rem-detail" id="rem-Ù…Ø­Ù…Ø¯"></div>
        </div>
        <div class="comp-card" id="card-Ø´ÙŠÙ…Ø§Ø¡" onclick="selectUser('Ø´ÙŠÙ…Ø§Ø¡')">
            <div style="font-weight:bold; color:var(--primary);">Ø§Ù„Ø£Ù… Ø´ÙŠÙ…Ø§Ø¡</div>
            <div class="score-tag" id="sc-Ø´ÙŠÙ…Ø§Ø¡">0</div>
            <div class="rem-detail" id="rem-Ø´ÙŠÙ…Ø§Ø¡"></div>
        </div>
        <div class="comp-card" id="card-Ø£Ø­Ù…Ø¯" onclick="selectUser('Ø£Ø­Ù…Ø¯')">
            <div style="font-weight:bold; color:var(--primary);">Ø£Ø­Ù…Ø¯</div>
            <div class="score-tag" id="sc-Ø£Ø­Ù…Ø¯">0</div>
            <div class="rem-detail" id="rem-Ø£Ø­Ù…Ø¯"></div>
        </div>
        <div class="comp-card" id="card-ÙŠØ§Ø³ÙŠÙ†" onclick="selectUser('ÙŠØ§Ø³ÙŠÙ†')">
            <div style="font-weight:bold; color:var(--primary);">ÙŠØ§Ø³ÙŠÙ†</div>
            <div class="score-tag" id="sc-ÙŠØ§Ø³ÙŠÙ†">0</div>
            <div class="rem-detail" id="rem-ÙŠØ§Ø³ÙŠÙ†"></div>
        </div>
    </div>

    <h2 id="user-title">ØªØ³Ø¬ÙŠÙ„: Ø§Ù„Ø£Ø¨ Ù…Ø­Ù…Ø¯</h2>

    <div class="section-card">
        <div class="section-title">ğŸ•‹ Ø§Ù„ÙØ±ÙˆØ¶ Ø§Ù„Ø®Ù…Ø³Ø©</div>
        <div id="fard-list"></div>
    </div>

    <div class="section-card">
        <div class="section-title">âœ¨ Ø§Ù„Ø³Ù†Ù† ÙˆØ§Ù„Ø±ÙˆØ§ØªØ¨ ÙˆØ§Ù„Ù†ÙˆØ§ÙÙ„</div>
        <div id="sunan-list"></div>
    </div>

    <div class="section-card">
        <div class="section-title">ğŸ“– Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„Ø£ÙˆØ±Ø§Ø¯ ÙˆØ§Ù„Ù‚ÙŠØ§Ù…</div>
        <div id="azkar-list"></div>
    </div>

    <div class="section-card">
        <div class="section-title">ğŸ’¬ Ù…Ù„ØªÙ‚Ù‰ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>
        <div id="chat-box" class="chat-area"></div>
        <div style="display:flex; gap:8px;">
            <input type="text" id="chat-in" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." style="flex:1; border-radius:8px; border:1px solid #ccc; padding:8px;">
            <button onclick="sendMsg()" style="background:var(--primary); color:white; border:none; padding:8px 20px; border-radius:8px; cursor:pointer;">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>
</div>

<script>
    let currentUser = 'Ù…Ø­Ù…Ø¯';
    const users = ['Ù…Ø­Ù…Ø¯', 'Ø´ÙŠÙ…Ø§Ø¡', 'Ø£Ø­Ù…Ø¯', 'ÙŠØ§Ø³ÙŠÙ†'];
    const motivationPhrases = [
        "Ø³Ø¨Ø§Ù‚ Ø§Ù„Ø¬Ù†Ø© Ø¨Ø¯Ø£ØŒ Ø§Ø³ØªØ¹Ù† Ø¨Ø§Ù„Ù„Ù‡!", "Ø¨Ù‚ÙŠ Ø§Ù„Ù‚Ù„ÙŠÙ„ØŒ Ù‡Ù…Ø© Ø­ØªÙ‰ Ø§Ù„Ù‚Ù…Ø©", 
        "Ù†ÙˆØ± Ø§Ù„Ù„Ù‡ Ù‚Ù„Ø¨Ùƒ Ø¨Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†", "Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ØŒ Ø¥Ù†Ø¬Ø§Ø² Ø±Ø§Ø¦Ø¹ Ø§Ù„ÙŠÙˆÙ…!",
        "Ù„Ø§ ÙŠØ²Ø§Ù„ Ù„Ø³Ø§Ù†Ùƒ Ø±Ø·Ø¨Ø§Ù‹ Ø¨Ø°ÙƒØ± Ø§Ù„Ù„Ù‡"
    ];

    const dataModel = {
        fard: [{id:'fajr', name:'Ø§Ù„ÙØ¬Ø±'}, {id:'dhuhr', name:'Ø§Ù„Ø¸Ù‡Ø±'}, {id:'asr', name:'Ø§Ù„Ø¹ØµØ±'}, {id:'maghrib', name:'Ø§Ù„Ù…ØºØ±Ø¨'}, {id:'isha', name:'Ø§Ù„Ø¹Ø´Ø§Ø¡'}],
        sunan: [
            {id:'s_fajr', name:'Ø³Ù†Ø© Ø§Ù„ÙØ¬Ø± (Ù¢ Ù‚Ø¨Ù„)', pts:10}, {id:'s_dhuhr_b', name:'Ø³Ù†Ø© Ø§Ù„Ø¸Ù‡Ø± (Ù¤ Ù‚Ø¨Ù„)', pts:10},
            {id:'s_dhuhr_a', name:'Ø³Ù†Ø© Ø§Ù„Ø¸Ù‡Ø± (Ù¢ Ø¨Ø¹Ø¯)', pts:10}, {id:'s_maghrib', name:'Ø³Ù†Ø© Ø§Ù„Ù…ØºØ±Ø¨ (Ù¢ Ø¨Ø¹Ø¯)', pts:10},
            {id:'s_isha', name:'Ø³Ù†Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡ (Ù¢ Ø¨Ø¹Ø¯)', pts:10}, {id:'duha', name:'ØµÙ„Ø§Ø© Ø§Ù„Ø¶Ø­Ù‰', pts:15}, {id:'witr', name:'Ø§Ù„Ø´ÙØ¹ ÙˆØ§Ù„ÙˆØªØ±', pts:15}
        ],
        azkar: [
            {id:'quran', name:'Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ', pts:40}, {id:'night', name:'Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„', pts:35},
            {id:'morn', name:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­', pts:20, link:'https://alazkar.today/'}, {id:'even', name:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡', pts:20, link:'https://alazkar.today/'},
            {id:'sleep', name:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…', pts:15, link:'https://alazkar.today/'}, {id:'mulk', name:'Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ', pts:30, link:'https://quran.com/67'},
            {id:'kahf', name:'Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù', pts:50, link:'https://quran.com/18', friday:true}
        ]
    };

    function updateView() {
        const d = document.getElementById('date-picker').value;
        document.getElementById('h-display').innerText = new Intl.DateTimeFormat('ar-SA-u-ca-islamic-uma', {day:'numeric', month:'long', year:'numeric'}).format(new Date(d));
        document.getElementById('motivation').innerText = motivationPhrases[Math.floor(Math.random() * motivationPhrases.length)];
        refresh();
    }

    function selectUser(u) {
        currentUser = u;
        document.querySelectorAll('.comp-card').forEach(c => c.classList.remove('active'));
        document.getElementById('card-'+u).classList.add('active');
        document.getElementById('user-title').innerText = "ØªØ³Ø¬ÙŠÙ„: " + (u === 'Ù…Ø­Ù…Ø¯' ? 'Ø§Ù„Ø£Ø¨ Ù…Ø­Ù…Ø¯' : u === 'Ø´ÙŠÙ…Ø§Ø¡' ? 'Ø§Ù„Ø£Ù… Ø´ÙŠÙ…Ø§Ø¡' : u);
        refresh();
    }

    function setFard(id, type, pts) {
        const d = document.getElementById('date-picker').value;
        const k = `epic_${currentUser}_${d}_${id}`;
        localStorage.setItem(k, type); localStorage.setItem(k+'_pts', pts);
        refresh();
    }

    function toggleHabit(id, pts) {
        const d = document.getElementById('date-picker').value;
        const k = `epic_${currentUser}_${d}_${id}`;
        const done = localStorage.getItem(k) === 'true';
        localStorage.setItem(k, !done); localStorage.setItem(k+'_pts', !done ? pts : 0);
        refresh();
    }

    function refresh() {
        const d = document.getElementById('date-picker').value;
        const isFri = new Date(d).getDay() === 5;
        let ranks = [];

        users.forEach(u => {
            let s = 0; let rem = [];
            dataModel.fard.forEach(h => {
                const v = localStorage.getItem(`epic_${u}_${d}_${h.id}`) || 'none';
                if(v === 'none') rem.push(h.name); else s += parseInt(localStorage.getItem(`epic_${u}_${d}_${h.id}_pts`) || 0);
            });
            [...dataModel.sunan, ...dataModel.azkar].forEach(h => {
                if(h.friday && !isFri) return;
                const done = localStorage.getItem(`epic_${u}_${d}_${h.id}`) === 'true';
                if(done) s += h.pts; else rem.push(h.name);
            });
            document.getElementById(`sc-${u}`).innerText = s;
            document.getElementById(`rem-${u}`).innerText = "Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: " + (rem.length > 0 ? rem.join('ØŒ ') : 'âœ… ØªÙ… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²');
            ranks.push({n: u, s: s, r: rem.slice(0,2).join('\n')});
        });

        // ØªØ±ØªÙŠØ¨ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ø¨ÙˆØ¯ÙŠÙˆÙ…
        ranks.sort((a,b) => b.s - a.s);
        for(let i=1; i<=4; i++) {
            document.getElementById(`rank-${i}`).innerText = ranks[i-1].n;
            document.getElementById(`ps-${i}`).innerText = ranks[i-1].s;
            document.getElementById(`pr-${i}`).innerText = "Ø¨Ø§Ù‚ÙŠ: " + (ranks[i-1].r || "âœ…");
        }

        updateMonthlyStats();
        renderLists(d, isFri);
    }

    function updateMonthlyStats() {
        const dateObj = new Date(document.getElementById('date-picker').value);
        const year = dateObj.getFullYear(), month = dateObj.getMonth();
        let monthlyScores = { 'Ù…Ø­Ù…Ø¯': 0, 'Ø´ÙŠÙ…Ø§Ø¡': 0, 'Ø£Ø­Ù…Ø¯': 0, 'ÙŠØ§Ø³ÙŠÙ†': 0 };

        for (let i = 1; i <= 31; i++) {
            const dayKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
            users.forEach(u => {
                [...dataModel.fard, ...dataModel.sunan, ...dataModel.azkar].forEach(h => {
                    monthlyScores[u] += parseInt(localStorage.getItem(`epic_${u}_${dayKey}_${h.id}_pts`) || 0);
                });
            });
        }
        
        document.getElementById('monthly-rankings').innerHTML = users.map(u => 
            `<div><b>${u}:</b> ${monthlyScores[u]}Ù†</div>`
        ).join('');
    }

    function renderLists(d, isFri) {
        document.getElementById('fard-list').innerHTML = dataModel.fard.map(h => {
            const v = localStorage.getItem(`epic_${currentUser}_${d}_${h.id}`) || 'none';
            return `
            <div class="habit-row">
                <span>${h.name}</span>
                <div class="prayer-options">
                    <div class="opt-btn ${v==='m'?'selected':''}" onclick="setFard('${h.id}','m',50)"><span class="pts-badge">50Ù†</span>Ù…Ø³Ø¬Ø¯</div>
                    <div class="opt-btn ${v==='h'?'selected':''}" onclick="setFard('${h.id}','h',25)"><span class="pts-badge">25Ù†</span>ÙØ±Ø¯</div>
                    <div class="opt-btn ${v==='q'?'selected':''}" onclick="setFard('${h.id}','q',10)"><span class="pts-badge">10Ù†</span>Ù‚Ø¶Ø§Ø¡</div>
                    <div class="opt-btn ${v==='none'?'selected':''}" onclick="setFard('${h.id}','none',0)">âœ–</div>
                </div>
            </div>`;
        }).join('');

        const renderH = (items, target) => {
            document.getElementById(target).innerHTML = items.map(h => {
                if(h.friday && !isFri) return '';
                const done = localStorage.getItem(`epic_${currentUser}_${d}_${h.id}`) === 'true';
                return `
                <div class="habit-row">
                    ${h.link ? `<a href="${h.link}" target="_blank">ğŸ”— ${h.name}</a>` : `<span>${h.name}</span>`}
                    <div style="display:flex; align-items:center; gap:10px;">
                        <span style="font-size:0.8rem; color:var(--gold);">${h.pts}Ù†</span>
                        <input type="checkbox" ${done?'checked':''} onchange="toggleHabit('${h.id}', ${h.pts})" style="transform:scale(1.2);">
                    </div>
                </div>`;
            }).join('');
        };
        renderH(dataModel.sunan, 'sunan-list');
        renderH(dataModel.azkar, 'azkar-list');
    }

    function manageChat() {
        const t = new Date().toDateString();
        if(localStorage.getItem('chat_epic_date') !== t) {
            localStorage.setItem('chat_epic_log', JSON.stringify([]));
            localStorage.setItem('chat_epic_date', t);
        }
        showChat();
    }
    function sendMsg() {
        const i = document.getElementById('chat-in'); if(!i.value) return;
        let m = JSON.parse(localStorage.getItem('chat_epic_log') || "[]");
        m.push({ u: currentUser, t: i.value });
        localStorage.setItem('chat_epic_log', JSON.stringify(m));
        i.value = ""; showChat();
    }
    function showChat() {
        document.getElementById('chat-box').innerHTML = JSON.parse(localStorage.getItem('chat_epic_log') || "[]").map(m => `<div><b>${m.u}:</b> ${m.t}</div>`).join('');
    }

    window.onload = () => {
        document.getElementById('date-picker').value = new Date().toISOString().split('T')[0];
        updateView(); manageChat();
    };
</script>
</body>
</html>
