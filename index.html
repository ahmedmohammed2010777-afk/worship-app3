<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø­Ø±Ø§Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ù…Ù„</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Changa:wght@400;700;800&family=Amiri:wght@400;700&family=Noto+Naskh+Arabic:wght@400;700&display=swap');

body { font-family: 'Changa', sans-serif; background: #f0f9ff; color: #1e293b; margin: 0; padding: 10px; }
.neu-card { background: white; border-radius: 25px; padding: 20px; margin-bottom: 20px; border: 1px solid #e2e8f0; box-shadow: 0 4px 15px rgba(0,0,0,0.04); }

/* Ø§Ù„Ø¨ÙˆØ¯ÙŠÙˆÙ… */
.podium-box { display: flex; align-items: flex-end; justify-content: center; gap: 8px; height: 150px; margin: 15px 0; }
.podium-col { display: flex; flex-direction: column; align-items: center; width: 22%; }
.step { width: 100%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: white; border-radius: 10px 10px 0 0; }
.p1 { height: 85px; background: linear-gradient(#fbbf24, #d97706); }
.p2 { height: 65px; background: linear-gradient(#94a3b8, #475569); }
.p3 { height: 45px; background: linear-gradient(#b45309, #78350f); }
.p4 { height: 30px; background: linear-gradient(#cbd5e1, #94a3b8); }
.user-label { font-size: 10px; font-weight: bold; margin-top: 5px; }

/* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… ÙˆØ§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
.status-select { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 3px; font-size: 10px; width: 100%; cursor: pointer; }
.section-title { font-weight: 800; border-right: 5px solid; padding-right: 10px; margin-bottom: 15px; }

/* Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø³ÙˆØ± */
.quran-modal { position: fixed; inset: 0; background: white; z-index: 9999; display: flex; flex-direction: column; }
.quran-content { flex: 1; overflow-y: auto; padding: 30px; font-family: 'Noto Naskh Arabic', serif; font-size: 1.8rem; line-height: 2.8; text-align: justify; background: #fffdf5; }
</style>
</head>
<body>
<div id="root"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, setDoc, onSnapshot, arrayUnion } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDba3kZK5ibQEIRRjVIHL7JIOHixX_7rVs",
  authDomain: "ebada-656e1.firebaseapp.com",
  projectId: "ebada-656e1",
  storageBucket: "ebada-656e1.firebasestorage.app",
  messagingSenderId: "705608653939",
  appId: "1:705608653939:web:5ab3609a6f7ccc8675de06"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
window.docRef = doc(db, "worship", "family");
window.setDoc = setDoc;
window.onSnapshot = onSnapshot;
window.arrayUnion = arrayUnion;
</script>

<script type="text/babel">
const { useState, useEffect } = React;

const QURAN_TEXTS = {
  "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ": "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ†Ù Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù. ØªÙØ¨ÙØ§Ø±ÙÙƒÙ Ø§Ù„Ù‘ÙØ°ÙÙŠ Ø¨ÙÙŠÙØ¯ÙÙ‡Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ ÙˆÙÙ‡ÙÙˆÙ Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„Ù‘Ù Ø´ÙÙŠÙ’Ø¡Ù Ù‚ÙØ¯ÙÙŠØ±ÙŒ (1) Ø§Ù„Ù‘ÙØ°ÙÙŠ Ø®ÙÙ„ÙÙ‚Ù Ø§Ù„Ù’Ù…ÙÙˆÙ’ØªÙ ÙˆÙØ§Ù„Ù’Ø­ÙÙŠÙØ§Ø©Ù Ù„ÙÙŠÙØ¨Ù’Ù„ÙÙˆÙ‡ÙÙ…Ù’ Ø£ÙÙŠÙ‘ÙÙƒÙÙ…Ù’ Ø£ÙØ­Ù’Ø³ÙÙ†Ù Ø¹ÙÙ…ÙÙ„Ù‹Ø§ ÙˆÙÙ‡ÙÙˆÙ Ø§Ù„Ù’Ø¹ÙØ²ÙÙŠØ²Ù Ø§Ù„Ù’ØºÙÙÙÙˆØ±Ù (2) ... [Ø§Ù„Ù†Øµ Ø§Ù„ÙƒØ§Ù…Ù„]",
  "Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù": "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ†Ù Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù. Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„Ù‘ÙÙ‡Ù Ø§Ù„Ù‘ÙØ°ÙÙŠ Ø£ÙÙ†Ù’Ø²ÙÙ„Ù Ø¹ÙÙ„ÙÙ‰ Ø¹ÙØ¨Ù’Ø¯ÙÙ‡Ù Ø§Ù„Ù’ÙƒÙØªÙØ§Ø¨Ù ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙØ¬Ù’Ø¹ÙÙ„Ù’ Ù„ÙÙ‡Ù Ø¹ÙÙˆØ¬Ù‹Ø§ (1) Ù‚ÙÙŠÙ‘ÙÙ…Ù‹Ø§ Ù„ÙÙŠÙÙ†Ù’Ø°ÙØ±Ù Ø¨ÙØ£Ù’Ø³Ù‹Ø§ Ø´ÙØ¯ÙÙŠØ¯Ù‹Ø§ Ù…ÙÙ†Ù’ Ù„ÙØ¯ÙÙ†Ù’Ù‡Ù ... [Ø§Ù„Ù†Øµ Ø§Ù„ÙƒØ§Ù…Ù„]"
};

const HADITHS = [
  "Â«Ù…ÙÙ†Ù’ ØµÙÙ„Ù‘ÙÙ‰ Ù„ÙÙ„Ù‘ÙÙ‡Ù ÙÙÙŠ ÙŠÙÙˆÙ’Ù…Ù Ø«ÙÙ†Ù’ØªÙÙŠÙ’ Ø¹ÙØ´Ù’Ø±ÙØ©Ù Ø±ÙÙƒÙ’Ø¹ÙØ©Ù‹ ØªÙØ·ÙÙˆÙ‘ÙØ¹Ù‹Ø§ Ø¨ÙÙ†ÙÙ‰ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ù„ÙÙ‡Ù Ø¨ÙÙŠÙ’ØªÙ‹Ø§ ÙÙÙŠ Ø§Ù„Ù’Ø¬ÙÙ†Ù‘ÙØ©ÙÂ»",
  "Â«Ø®ÙŠØ§Ø±ÙƒÙ… Ø®ÙŠØ§Ø±ÙƒÙ… Ù„Ø£Ù‡Ù„Ù‡Ù…ØŒ ÙˆØ£Ù†Ø§ Ø®ÙŠØ§Ø±ÙƒÙ… Ù„Ø£Ù‡Ù„ÙŠÂ»",
  "Â«Ø£Ø­Ø¨ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù„Ù‡ Ø£Ø¯ÙˆÙ…Ù‡Ø§ ÙˆØ¥Ù† Ù‚Ù„Â»"
];

function App() {
  const [data, setData] = useState({});
  const [view, setView] = useState(null);
  const users = ['Ù…Ø­Ù…Ø¯','Ø´ÙŠÙ…Ø§Ø¡','Ø£Ø­Ù…Ø¯','ÙŠØ§Ø³ÙŠÙ†'];
  const today = new Date().toISOString().split('T')[0];
  const isFriday = new Date().getDay() === 5;

  useEffect(() => {
    const unsub = window.onSnapshot(window.docRef, (snap) => snap.exists() && setData(snap.data()));
    return () => unsub();
  }, []);

  const update = async (u, t, v) => {
    const newData = { ...data, [today]: { ...data[today], [u]: { ...data[today]?.[u], [t]: v } } };
    await window.setDoc(window.docRef, newData);
  };

  const openAzkar = () => window.open("https://alazkar.today/", "_blank");

  return (
    <div className="max-w-md mx-auto pb-10">
      {view && (
        <div className="quran-modal">
          <div className="p-4 flex justify-between items-center bg-slate-100">
            <h2 className="font-bold">{view}</h2>
            <button onClick={() => setView(null)} className="text-red-500 font-bold">Ø¥ØºÙ„Ø§Ù‚</button>
          </div>
          <div className="quran-content">{QURAN_TEXTS[view]}</div>
        </div>
      )}

      <header className="py-6 text-center">
        <h1 className="text-3xl font-black text-sky-600 mb-2">Ù…ÙØ­Ù’Ø±Ø§Ø¨Ù Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© âœ¨</h1>
        <div className="neu-card border-none bg-sky-50 text-sky-800 text-sm italic">
          {HADITHS[new Date().getDate() % HADITHS.length]}
        </div>
      </header>

      {/* Ù…Ù†ØµØ© Ø§Ù„ØªØªÙˆÙŠØ¬ */}
      <div className="neu-card">
        <h3 className="text-center font-bold text-amber-500 mb-2 text-sm">ğŸ† ÙØ±Ø³Ø§Ù† Ø§Ù„Ø·Ø§Ø¹Ø© Ø§Ù„ÙŠÙˆÙ…</h3>
        <div className="podium-box">
          <div className="podium-col"><div className="step p2 text-xs">2</div><span className="user-label">Ø£Ø­Ù…Ø¯</span></div>
          <div className="podium-col"><span className="text-xl">ğŸ‘‘</span><div className="step p1 text-xs">1</div><span className="user-label">Ù…Ø­Ù…Ø¯</span></div>
          <div className="podium-col"><div className="step p3 text-xs">3</div><span className="user-label">Ø´ÙŠÙ…Ø§Ø¡</span></div>
          <div className="podium-col"><div className="step p4 text-xs">4</div><span className="user-label">ÙŠØ§Ø³ÙŠÙ†</span></div>
        </div>
      </div>

      {/* Ø§Ù„ØµÙ„ÙˆØ§Øª Ø§Ù„Ù…ÙØ±ÙˆØ¶Ø© */}
      <div className="neu-card">
        <h3 className="section-title text-amber-600 border-amber-600">ğŸ•‹ Ø§Ù„ØµÙ„ÙˆØ§Øª Ø§Ù„Ù…ÙØ±ÙˆØ¶Ø©</h3>
        <table className="w-full text-[10px]">
          <thead><tr><th className="text-right pb-2">Ø§Ù„ØµÙ„Ø§Ø©</th>{users.map(u => <th key={u}>{u}</th>)}</tr></thead>
          <tbody>
            {["Ø§Ù„ÙØ¬Ø±", isFriday ? "Ø§Ù„Ø¬Ù…Ø¹Ø©" : "Ø§Ù„Ø¸Ù‡Ø±", "Ø§Ù„Ø¹ØµØ±", "Ø§Ù„Ù…ØºØ±Ø¨", "Ø§Ù„Ø¹Ø´Ø§Ø¡"].map(p => (
              <tr key={p} className="border-t">
                <td className="py-2 font-bold">{p}</td>
                {users.map(u => (
                  <td key={u} className="px-1">
                    <select value={data[today]?.[u]?.[p] || ""} onChange={e => update(u, p, e.target.value)} className="status-select">
                      <option value="">-</option><option value="Ù…Ø³Ø¬Ø¯">ğŸ•Œ Ù…Ø³Ø¬Ø¯</option><option value="Ø­Ø§Ø¶Ø±">âœ… Ø­Ø§Ø¶Ø±</option><option value="Ù‚Ø¶Ø§Ø¡">â³ Ù‚Ø¶Ø§Ø¡</option>
                    </select>
                  </td>
                ))}
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      {/* Ø§Ù„Ø³Ù†Ù† Ø§Ù„Ù‚Ø¨Ù„ÙŠØ© ÙˆØ§Ù„Ø¨Ø¹Ø¯ÙŠØ© */}
      <div className="neu-card">
        <h3 className="section-title text-emerald-600 border-emerald-600">âœ¨ Ø§Ù„Ø³Ù†Ù† Ø§Ù„Ø±ÙˆØ§ØªØ¨</h3>
        <div className="space-y-2">
          {[
            {n: "Ø³Ù†Ø© Ø§Ù„ÙØ¬Ø± (Ù‚Ø¨Ù„ÙŠØ©)", c: "emerald"},
            {n: "Ø³Ù†Ø© Ø§Ù„Ø¸Ù‡Ø± (Ù‚Ø¨Ù„ÙŠØ©)", c: "emerald"},
            {n: "Ø³Ù†Ø© Ø§Ù„Ø¸Ù‡Ø± (Ø¨Ø¹Ø¯ÙŠØ©)", c: "emerald"},
            {n: "Ø³Ù†Ø© Ø§Ù„Ù…ØºØ±Ø¨ (Ø¨Ø¹Ø¯ÙŠØ©)", c: "emerald"},
            {n: "Ø³Ù†Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡ (Ø¨Ø¹Ø¯ÙŠØ©)", c: "emerald"},
            {n: "ØµÙ„Ø§Ø© Ø§Ù„Ø¶Ø­Ù‰", c: "amber"}
          ].map(s => (
            <div key={s.n} className="flex items-center justify-between py-1 border-b border-slate-50 last:border-0">
              <span className="text-[11px] font-bold text-slate-600">{s.n}</span>
              <div className="flex gap-1">
                {users.map(u => (
                  <button key={u} onClick={() => update(u, s.n, !data[today]?.[u]?.[s.n])} className={`w-7 h-7 rounded-lg text-[10px] font-bold transition-all ${data[today]?.[u]?.[s.n] ? 'bg-emerald-500 text-white shadow-md scale-110' : 'bg-slate-100 text-slate-300'}`}>{u[0]}</button>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„ ÙˆØ§Ù„Ø´ÙØ¹ ÙˆØ§Ù„ÙˆØªØ± */}
      <div className="neu-card">
        <h3 className="section-title text-indigo-600 border-indigo-600">ğŸŒ™ Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„</h3>
        <div className="space-y-2">
          {["Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„", "Ø§Ù„Ø´ÙØ¹ ÙˆØ§Ù„ÙˆØªØ±"].map(s => (
            <div key={s} className="flex items-center justify-between py-1 border-b border-slate-50 last:border-0">
              <span className="text-[11px] font-bold text-slate-600">{s}</span>
              <div className="flex gap-1">
                {users.map(u => (
                  <button key={u} onClick={() => update(u, s, !data[today]?.[u]?.[s])} className={`w-7 h-7 rounded-lg text-[10px] font-bold ${data[today]?.[u]?.[s] ? 'bg-indigo-500 text-white shadow-md' : 'bg-slate-100 text-slate-300'}`}>{u[0]}</button>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„Ø£ÙˆØ±Ø§Ø¯ */}
      <div className="neu-card">
        <h3 className="section-title text-sky-600 border-sky-600">ğŸ“– Ø§Ù„Ø£ÙˆØ±Ø§Ø¯ ÙˆØ§Ù„Ø£Ø°ÙƒØ§Ø±</h3>
        <div className="space-y-3">
          {["Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­", "Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡", "Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…", "Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ", isFriday ? "Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù" : "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ"].map(w => (
            <div key={w} className="flex items-center justify-between">
              <span onClick={() => w.includes("Ø£Ø°ÙƒØ§Ø±") ? openAzkar() : (QURAN_TEXTS[w] ? setView(w) : null)} className="text-[12px] font-bold text-slate-700 cursor-pointer hover:text-sky-500 underline decoration-sky-100">
                {w} <span className="text-[8px] bg-sky-50 px-1 rounded">ÙØªØ­ â†—</span>
              </span>
              <div className="flex gap-1">
                {users.map(u => (
                  <button key={u} onClick={() => update(u, w, !data[today]?.[u]?.[w])} className={`w-7 h-7 rounded-lg text-[10px] font-bold ${data[today]?.[u]?.[w] ? 'bg-sky-500 text-white shadow-md' : 'bg-slate-100 text-slate-300'}`}>{u[0]}</button>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
</script>
</body>
</html>
