<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø¨Ø§Ø¯ØªÙŠ - Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ø§Ù„Ù…Ø·ÙˆØ±Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #b8860b;
            --emerald: #2e7d32;
            --dark-red: #d32f2f;
            --luxury-shadow: 0 15px 35px rgba(0,0,0,0.1), inset 0 0 10px rgba(184, 134, 11, 0.05);
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f0f2f5;
            margin: 0; padding: 15px;
            color: #333;
        }

        .container { max-width: 800px; margin: 0 auto; }

        /* Ø§Ù„ØªÙ‚ÙˆÙŠÙ… */
        .date-picker { margin: 20px 0; text-align: center; }
        input[type="date"] { 
            padding: 10px; border-radius: 10px; border: 2px solid var(--gold); 
            font-family: 'Tajawal'; font-weight: bold; cursor: pointer;
        }

        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„ÙØ®Ù… Ù„Ù„Ø­Ø¯ÙŠØ« ÙˆØ§Ù„ÙˆÙ…Ø¶Ø© */
        .luxury-card {
            background: white; border-radius: 20px;
            padding: 10px; box-shadow: var(--luxury-shadow);
            border: 1px solid rgba(184, 134, 11, 0.2);
            margin-bottom: 20px;
        }
        .card-inner {
            border: 2px double var(--gold); border-radius: 15px;
            padding: 25px 15px; text-align: center;
        }
        .naskh-font { font-family: 'Amiri', serif; font-size: 1.5rem; line-height: 1.8; margin: 10px 0; color: #1a1a1a; }
        .label-gold { color: var(--gold); font-weight: bold; font-size: 1rem; display: block; margin-bottom: 5px; }

        /* Ù…Ù†ØµØ© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„ ÙˆØ§Ù„Ù…ØªØ¨Ù‚ÙŠ */
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .stat-card { background: var(--emerald); color: white; padding: 15px; border-radius: 15px; text-align: center; box-shadow: 0 4px 15px rgba(46, 125, 50, 0.3); }
        .remaining-box { background: var(--dark-red); color: white; padding: 15px; border-radius: 15px; text-align: center; box-shadow: 0 4px 15px rgba(211, 47, 47, 0.3); }

        /* Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª */
        .section-box {
            background: white; border-radius: 15px; padding: 20px;
            margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .section-title { border-right: 5px solid var(--emerald); padding-right: 10px; margin-bottom: 15px; color: var(--emerald); font-weight: bold; }
        
        .task-row {
            display: flex; align-items: center; justify-content: space-between;
            padding: 12px 0; border-bottom: 1px solid #eee;
        }
        .task-info { display: flex; align-items: center; gap: 12px; }
        input[type="checkbox"] { width: 20px; height: 20px; accent-color: var(--emerald); cursor: pointer; }

        .masjid-btn { 
            font-size: 0.8rem; padding: 6px 12px; border-radius: 8px; 
            border: 1px solid #ccc; background: #fff; cursor: pointer; transition: 0.3s;
        }
        .masjid-active { background: #e8f5e9; border-color: var(--emerald); color: var(--emerald); font-weight: bold; }

        /* Ø§Ù„Ø´Ø§Øª */
        .chat-room { background: white; border-radius: 15px; height: 250px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        #chat-messages { flex: 1; padding: 15px; overflow-y: auto; background: #f9f9f9; font-size: 0.95rem; }
        .chat-input { display: flex; border-top: 1px solid #eee; }
        .chat-input input { flex: 1; border: none; padding: 15px; outline: none; font-family: 'Tajawal'; }
        .chat-input button { background: var(--emerald); color: white; border: none; padding: 0 25px; cursor: pointer; font-weight: bold; }

    </style>
</head>
<body>

    <div class="container">
        <div class="date-picker">
            <input type="date" id="main-calendar" onchange="updateDateByCalendar()">
            <h2 id="display-date" style="color: var(--gold); margin-top: 15px;"></h2>
        </div>

        <div class="spiritual-header">
            <div class="luxury-card">
                <div class="card-inner">
                    <span class="label-gold">âœ¨ Ø­Ø¯ÙŠØ« Ø§Ù„ÙŠÙˆÙ…</span>
                    <p id="daily-hadith" class="naskh-font">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
                </div>
            </div>
            <div class="luxury-card" style="border-color: var(--emerald);">
                <div class="card-inner" style="border-color: var(--emerald);">
                    <span class="label-gold" style="color: var(--emerald);">ğŸ’¡ ÙˆÙ…Ø¶Ø© Ø§Ù„ÙŠÙˆÙ…</span>
                    <p id="daily-flash" class="naskh-font" style="font-size: 1.25rem;"></p>
                </div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div>ğŸ† Ù…Ù†ØµØ© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„</div>
                <div id="hero-rank" style="font-size: 1.6rem; font-weight: bold; margin: 5px 0;">Ù…Ø¨ØªØ¯Ø¦</div>
                <div id="total-percent">0% Ø¥Ù†Ø¬Ø§Ø²</div>
            </div>
            <div class="remaining-box">
                <div>âš ï¸ Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</div>
                <div id="remaining-count" style="font-size: 1.6rem; font-weight: bold; margin: 5px 0;">0</div>
                <div>Ù…Ù‡Ù…Ø© Ù…ØªØ±ÙˆÙƒØ©</div>
            </div>
        </div>

        <div class="section-box">
            <h3 class="section-title">Ø§Ù„ÙØ±ÙˆØ¶ Ø§Ù„Ø®Ù…Ø³Ø©</h3>
            <div id="fard-list"></div>
        </div>

        <div class="section-box">
            <h3 class="section-title">Ø§Ù„Ø³Ù†Ù† ÙˆØ§Ù„Ø±ÙˆØ§ØªØ¨</h3>
            <div id="sunnah-list"></div>
        </div>

        <h3 class="section-title">ğŸ’¬ Ù…Ù„ØªÙ‚Ù‰ Ø§Ù„Ø·Ø§Ø¹Ø©</h3>
        <div class="chat-room">
            <div id="chat-messages"><b>Ù†Ø¸Ø§Ù…:</b> Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ù„ØªÙ‚Ù‰ Ø§Ù„Ø·Ø§Ø¹Ø©.. Ø´Ø§Ø±ÙƒÙ†Ø§ Ø°ÙƒØ± Ø§Ù„Ù„Ù‡ Ø§Ù„ÙŠÙˆÙ….</div>
            <div class="chat-input">
                <input type="text" id="chat-txt" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ© Ù„Ø£ØµØ­Ø§Ø¨Ùƒ...">
                <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <script>
        const hadiths = [
            "Ù‚Ø§Ù„ ï·º: Â«Ø®ÙÙŠÙ’Ø±ÙÙƒÙÙ…Ù’ Ù…ÙÙ†Ù’ ØªÙØ¹ÙÙ„Ù‘ÙÙ…Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù ÙˆÙØ¹ÙÙ„Ù‘ÙÙ…ÙÙ‡ÙÂ»",
            "Ù‚Ø§Ù„ ï·º: Â«Ø§Ù„Ø¯Ù‘ÙØ¹ÙØ§Ø¡Ù Ù‡ÙÙˆÙ Ø§Ù„Ù’Ø¹ÙØ¨ÙØ§Ø¯ÙØ©ÙÂ»",
            "Ù‚Ø§Ù„ ï·º: Â«Ù…ÙÙ†Ù’ Ø¨ÙÙ†ÙÙ‰ Ù…ÙØ³Ù’Ø¬ÙØ¯Ù‹Ø§ Ù„ÙÙ„Ù‘ÙÙ‡Ù Ø¨ÙÙ†ÙÙ‰ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ù„ÙÙ‡Ù Ø¨ÙÙŠÙ’ØªÙ‹Ø§ ÙÙÙŠ Ø§Ù„Ù’Ø¬ÙÙ†Ù‘ÙØ©ÙÂ»",
            "Ù‚Ø§Ù„ ï·º: Â«Ø£ÙØ­ÙØ¨Ù‘Ù Ø§Ù„Ø£ÙØ¹Ù’Ù…ÙØ§Ù„Ù Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø£ÙØ¯Ù’ÙˆÙÙ…ÙÙ‡ÙØ§ ÙˆÙØ¥ÙÙ†Ù’ Ù‚ÙÙ„Ù‘ÙÂ»",
            "Ù‚Ø§Ù„ ï·º: Â«ÙƒÙÙ„Ù‘Ù Ù…ÙØ¹Ù’Ø±ÙÙˆÙÙ ØµÙØ¯ÙÙ‚ÙØ©ÙŒÂ»"
        ];
        const flashes = [
            "Ø§Ù„ØµÙ„Ø§Ø© Ù†ÙˆØ±ØŒ ÙˆØ§Ù„ØµØ¯Ù‚Ø© Ø¨Ø±Ù‡Ø§Ù†ØŒ ÙˆØ§Ù„ØµØ¨Ø± Ø¶ÙŠØ§Ø¡.",
            "Ù…Ù† Ù„Ø²Ù… Ø§Ù„Ø§Ø³ØªØºÙØ§Ø± Ø¬Ø¹Ù„ Ø§Ù„Ù„Ù‡ Ù„Ù‡ Ù…Ù† ÙƒÙ„ Ù‡Ù… ÙØ±Ø¬Ø§Ù‹.",
            "Ø±ØªÙ„ ÙˆØ±Ø¯Ùƒ Ø¨ØªØ¯Ø¨Ø±ØŒ ÙØ§Ù„Ù‚Ø±Ø¢Ù† Ø±Ø¨ÙŠØ¹ Ø§Ù„Ù‚Ù„ÙˆØ¨.",
            "Ø§Ø³ØªØ¹Ù† Ø¨Ø§Ù„Ù„Ù‡ ÙˆÙ„Ø§ ØªØ¹Ø¬Ø²ØŒ ÙÙƒÙ„ Ø®Ø·ÙˆØ© Ù„Ù„Ù‡ Ù…Ø£Ø¬ÙˆØ±Ø©.",
            "Ø§Ù„Ø®Ø¨ÙŠØ¦Ø© Ø§Ù„ØµØ§Ù„Ø­Ø© Ù‡ÙŠ Ø²Ø§Ø¯Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙŠÙˆÙ… Ø§Ù„Ù‚ÙŠØ§Ù…Ø©."
        ];
        
        const fardPrayers = ["Ø§Ù„ÙØ¬Ø±", "Ø§Ù„Ø¸Ù‡Ø±", "Ø§Ù„Ø¹ØµØ±", "Ø§Ù„Ù…ØºØ±Ø¨", "Ø§Ù„Ø¹Ø´Ø§Ø¡"];
        const sunnahPrayers = [
            { name: "Ø³Ù†Ø© Ø§Ù„ÙØ¬Ø± (Ù‚Ø¨Ù„ÙŠØ©)", count: 2 },
            { name: "Ø³Ù†Ø© Ø§Ù„Ø¸Ù‡Ø± (Ù‚Ø¨Ù„ÙŠØ©)", count: 4 },
            { name: "Ø³Ù†Ø© Ø§Ù„Ø¸Ù‡Ø± (Ø¨Ø¹Ø¯ÙŠØ©)", count: 2 },
            { name: "Ø³Ù†Ø© Ø§Ù„Ù…ØºØ±Ø¨ (Ø¨Ø¹Ø¯ÙŠØ©)", count: 2 },
            { name: "Ø³Ù†Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡ (Ø¨Ø¹Ø¯ÙŠØ©)", count: 2 }
        ];

        function init(dateObj = new Date()) {
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ®
            document.getElementById('display-date').innerText = dateObj.toLocaleDateString('ar-EG', {weekday:'long', day:'numeric', month:'long', year:'numeric'});
            
            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ØªØºÙŠØ± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙˆÙ…
            const dayIndex = dateObj.getDate() % hadiths.length;
            document.getElementById('daily-hadith').innerText = hadiths[dayIndex];
            document.getElementById('daily-flash').innerText = flashes[dayIndex];

            // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… (ØªØµÙÙŠØ±Ù‡Ø§ Ø£ÙˆÙ„Ø§Ù‹ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„ØªØ§Ø±ÙŠØ®)
            document.getElementById('fard-list').innerHTML = "";
            document.getElementById('sunnah-list').innerHTML = "";
            renderFard();
            renderSunnah();
            updateStats();
        }

        function renderFard() {
            const container = document.getElementById('fard-list');
            fardPrayers.forEach(p => {
                container.innerHTML += `
                    <div class="task-row">
                        <div class="task-info">
                            <input type="checkbox" class="task-check" onchange="updateStats()">
                            <span><b>${p}</b></span>
                        </div>
                        <button class="masjid-btn" onclick="toggleMasjid(this)">ğŸ•Œ ÙÙŠ Ø§Ù„Ù…Ø³Ø¬Ø¯</button>
                    </div>`;
            });
        }

        function renderSunnah() {
            const container = document.getElementById('sunnah-list');
            sunnahPrayers.forEach(s => {
                container.innerHTML += `
                    <div class="task-row">
                        <div class="task-info">
                            <input type="checkbox" class="task-check" onchange="updateStats()">
                            <span>${s.name} - <small>${s.count} Ø±ÙƒØ¹Ø§Øª</small></span>
                        </div>
                    </div>`;
            });
        }

        function toggleMasjid(btn) {
            btn.classList.toggle('masjid-active');
            updateStats();
        }

        function updateStats() {
            const allChecks = document.querySelectorAll('.task-check');
            const done = Array.from(allChecks).filter(c => c.checked).length;
            const total = allChecks.length;
            const percent = Math.round((done / total) * 100) || 0;

            document.getElementById('total-percent').innerText = percent + "% Ø¥Ù†Ø¬Ø§Ø²";
            document.getElementById('remaining-count').innerText = total - done;

            // ØªØ­Ø¯ÙŠØ« Ù…Ù†ØµØ© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„
            let rank = "Ù…Ø¨ØªØ¯Ø¦";
            if(percent > 30) rank = "Ù…Ø¬Ø§Ù‡Ø¯";
            if(percent > 60) rank = "Ù…Ø«Ø§Ø¨Ø±";
            if(percent > 85) rank = "Ø¨Ø·Ù„ Ø·Ø§Ø¹Ø© ğŸ‘‘";
            document.getElementById('hero-rank').innerText = rank;
        }

        function updateDateByCalendar() {
            const selectedDate = new Date(document.getElementById('main-calendar').value);
            if(!isNaN(selectedDate)) {
                init(selectedDate);
            }
        }

        function sendMessage() {
            const txt = document.getElementById('chat-txt');
            if(txt.value.trim() !== "") {
                const msgBox = document.getElementById('chat-messages');
                const time = new Date().toLocaleTimeString('ar-EG', {hour: '2-digit', minute:'2-digit'});
                msgBox.innerHTML += `<div><small style="color:gray">${time}</small> <b>Ø£Ù†Øª:</b> ${txt.value}</div>`;
                txt.value = "";
                msgBox.scrollTop = msgBox.scrollHeight;
            }
        }

        window.onload = () => {
            init();
            // ÙˆØ¶Ø¹ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ… ÙÙŠ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
            document.getElementById('main-calendar').valueAsDate = new Date();
        };
    </script>
</body>
</html>
