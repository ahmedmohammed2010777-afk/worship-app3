<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø¨Ø§Ø¯ØªÙŠ Ø§Ù„Ø¹Ø§Ø¦Ù„ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #b8860b;
            --emerald: #2e7d32;
            --dark-red: #d32f2f;
            --podium-bg: #f8f9fa;
        }

        body { font-family: 'Tajawal', sans-serif; background-color: #f0f2f5; margin: 0; padding: 10px; color: #333; }
        .container { max-width: 800px; margin: 0 auto; }

        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„ÙØ®Ù… Ù„Ù„Ø­Ø¯ÙŠØ« ÙˆØ§Ù„ÙˆÙ…Ø¶Ø© */
        .luxury-card {
            background: white; border-radius: 20px; padding: 10px; margin-bottom: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 1px solid rgba(184, 134, 11, 0.2);
        }
        .card-inner { border: 2px double var(--gold); border-radius: 15px; padding: 15px; text-align: center; }
        .naskh-font { font-family: 'Amiri', serif; font-size: 1.4rem; line-height: 1.6; margin: 5px 0; color: #1a1a1a; }

        /* Ù…Ù†ØµØ© Ø§Ù„ØªØªÙˆÙŠØ¬ (Ø§Ù„Ø¨ÙˆØ¯ÙŠÙˆÙ…) */
        .podium-container {
            background: white; border-radius: 20px; padding: 20px; margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); text-align: center;
        }
        .podium-title { color: var(--emerald); font-weight: bold; margin-bottom: 20px; display: block; }
        .podium-flex { 
            display: flex; align-items: flex-end; justify-content: center; gap: 10px; height: 180px; margin-top: 10px;
        }
        .podium-step {
            flex: 1; display: flex; flex-direction: column; align-items: center;
            border-radius: 10px 10px 0 0; position: relative; padding-bottom: 10px;
            transition: height 0.5s ease;
        }
        .step-1 { background: linear-gradient(to top, #ffd700, #fff9c4); height: 100%; z-index: 3; }
        .step-2 { background: linear-gradient(to top, #c0c0c0, #f5f5f5); height: 75%; z-index: 2; }
        .step-3 { background: linear-gradient(to top, #cd7f32, #efebe9); height: 55%; z-index: 1; }
        .step-4 { background: #e0e0e0; height: 40%; }
        
        .competitor-name { font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; }
        .competitor-score { font-size: 0.8rem; color: #555; }
        .medal { font-size: 1.5rem; position: absolute; top: -30px; }

        /* Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„ */
        .remaining-box {
            background: var(--dark-red); color: white; padding: 12px; border-radius: 15px;
            text-align: center; margin-bottom: 15px; font-weight: bold;
        }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ§Ù„Ù…Ù‡Ø§Ù… */
        .section-box { background: white; border-radius: 15px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .section-title { border-right: 4px solid var(--emerald); padding-right: 8px; margin-bottom: 10px; color: var(--emerald); font-weight: bold; }
        .task-row { display: flex; align-items: center; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
        
        .opt-btn { font-size: 0.7rem; padding: 5px 8px; border-radius: 5px; border: 1px solid #ccc; cursor: pointer; background: white; }
        .opt-btn.active-masjid { background: var(--emerald); color: white; border-color: var(--emerald); }
        .opt-btn.active-fard { background: #2196F3; color: white; border-color: #2196F3; }
        .opt-btn.active-qada { background: #757575; color: white; border-color: #757575; }

        .link-card { display: flex; justify-content: space-between; padding: 10px; background: #e8f5e9; border-radius: 8px; text-decoration: none; color: #2e7d32; font-weight: bold; margin-bottom: 8px; border: 1px solid #c8e6c9; }
    </style>
</head>
<body>

    <div class="container">
        <div style="text-align: center; margin-bottom: 15px;">
            <input type="date" id="main-calendar" onchange="updateAppDate()" style="padding: 8px; border-radius: 8px; border: 1px solid var(--gold);">
            <h2 id="display-date" style="color: var(--gold); margin-top: 5px; font-size: 1.2rem;"></h2>
        </div>

        <div class="luxury-card">
            <div class="card-inner">
                <span style="color:var(--gold); font-weight: bold; font-size: 0.9rem;">âœ¨ Ø­Ø¯ÙŠØ« Ø§Ù„ÙŠÙˆÙ…</span>
                <p id="daily-hadith" class="naskh-font"></p>
            </div>
        </div>
        <div class="luxury-card" style="border-color: var(--emerald);">
            <div class="card-inner" style="border-color: var(--emerald);">
                <span style="color:var(--emerald); font-weight: bold; font-size: 0.9rem;">ğŸ’¡ ÙˆÙ…Ø¶Ø© Ø§Ù„ÙŠÙˆÙ…</span>
                <p id="daily-flash" class="naskh-font" style="font-size: 1.1rem;"></p>
            </div>
        </div>

        <div class="podium-container">
            <span class="podium-title">ğŸ† Ù…Ù†ØµØ© ØªØªÙˆÙŠØ¬ Ø¹Ø§Ø¦Ù„Ø© Ø§Ù„Ù…Ø­Ø¨Ø©</span>
            <div class="podium-flex" id="podium-ui">
                </div>
        </div>

        <div class="remaining-box">
            âš ï¸ Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©: <span id="remaining-count">0</span>
        </div>

        <div class="section-box">
            <h3 class="section-title">Ø§Ù„ÙØ±ÙˆØ¶ (Ø§Ù„Ø£ÙØ¶Ù„ÙŠØ©: Ù…Ø³Ø¬Ø¯ > ÙØ±Ø¯ > Ù‚Ø¶Ø§Ø¡)</h3>
            <div id="fard-list"></div>
        </div>

        <div class="section-box">
            <h3 class="section-title">Ø§Ù„Ø³Ù†Ù† ÙˆØ§Ù„Ø£ÙˆØ±Ø§Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h3>
            <div id="sunnah-list"></div>
        </div>

        <div class="section-box">
            <h3 class="section-title">Ø§Ù„Ù…ØµØ­Ù ÙˆØ§Ù„Ø£Ø°ÙƒØ§Ø±</h3>
            <a href="https://alazkar.today/" target="_blank" class="link-card"><span>ğŸ“– Ø­ØµÙ† Ø§Ù„Ù…Ø³Ù„Ù… (Ø§Ù„Ø£Ø°ÙƒØ§Ø±)</span> ğŸ”—</a>
            <a href="https://quran.com/67" target="_blank" class="link-card"><span>ğŸ‘‘ Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ</span> ğŸ“–</a>
            <div id="kahf-area"></div>
        </div>
    </div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        const hadiths = ["Ù‚Ø§Ù„ ï·º: Â«Ø®ÙÙŠÙ’Ø±ÙÙƒÙÙ…Ù’ Ù…ÙÙ†Ù’ ØªÙØ¹ÙÙ„Ù‘ÙÙ…Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù ÙˆÙØ¹ÙÙ„Ù‘ÙÙ…ÙÙ‡ÙÂ»", "Ù‚Ø§Ù„ ï·º: Â«Ø£ÙØ­ÙØ¨Ù‘Ù Ø§Ù„Ø£ÙØ¹Ù’Ù…ÙØ§Ù„Ù Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø£ÙØ¯Ù’ÙˆÙÙ…ÙÙ‡ÙØ§ ÙˆÙØ¥ÙÙ†Ù’ Ù‚ÙÙ„Ù‘ÙÂ»", "Ù‚Ø§Ù„ ï·º: Â«Ø§Ù„Ø¯Ù‘ÙØ¹ÙØ§Ø¡Ù Ù‡ÙÙˆÙ Ø§Ù„Ù’Ø¹ÙØ¨ÙØ§Ø¯ÙØ©ÙÂ»"];
        const flashes = ["Ø§Ø¬Ø¹Ù„ Ù„Ù†ÙØ³Ùƒ Ø®Ø¨ÙŠØ¦Ø© Ù…Ù† Ø¹Ù…Ù„ ØµØ§Ù„Ø­.", "Ø§Ù„ØµÙ„Ø§Ø© Ù†ÙˆØ± ØªÙ‚Ø°Ù ÙÙŠ Ø§Ù„Ù‚Ù„ÙˆØ¨.", "Ø¨Ø°ÙƒØ± Ø§Ù„Ù„Ù‡ ØªØ·Ù…Ø¦Ù† Ø§Ù„Ù‚Ù„ÙˆØ¨ ÙˆØªÙ†Ø¬Ù„ÙŠ Ø§Ù„Ù‡Ù…ÙˆÙ…."];
        const fardNames = ["Ø§Ù„ÙØ¬Ø±", "Ø§Ù„Ø¸Ù‡Ø±", "Ø§Ù„Ø¹ØµØ±", "Ø§Ù„Ù…ØºØ±Ø¨", "Ø§Ù„Ø¹Ø´Ø§Ø¡"];
        
        // Ø§Ù„Ù…ØªÙ†Ø§ÙØ³ÙˆÙ† (Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©)
        let family = [
            { name: "Ø§Ù„Ø£Ø¨ Ù…Ø­Ù…Ø¯", score: 95, class: "step-1", medal: "ğŸ¥‡" },
            { name: "Ø§Ù„Ø£Ù… Ø´ÙŠÙ…Ø§Ø¡", score: 92, class: "step-2", medal: "ğŸ¥ˆ" },
            { name: "Ø£Ø­Ù…Ø¯ (Ø§Ù„Ø£ÙƒØ¨Ø±)", score: 88, class: "step-3", medal: "ğŸ¥‰" },
            { name: "ÙŠØ§Ø³ÙŠÙ† (Ø§Ù„Ø£ØµØºØ±)", score: 80, class: "step-4", medal: "ğŸ…" }
        ];

        function updateAppDate() {
            const dateVal = document.getElementById('main-calendar').value;
            init(dateVal ? new Date(dateVal) : new Date());
        }

        function init(d = new Date()) {
            const isFriday = d.getDay() === 5;
            document.getElementById('display-date').innerText = d.toLocaleDateString('ar-EG', {weekday:'long', day:'numeric', month:'long'});
            
            // ØªØ­Ø¯ÙŠØ« Ù†ØµÙˆØµ Ø§Ù„ÙŠÙˆÙ…
            const dayIdx = d.getDate() % hadiths.length;
            document.getElementById('daily-hadith').innerText = hadiths[dayIdx];
            document.getElementById('daily-flash').innerText = flashes[dayIdx];

            // Ø§Ù„ÙØ±ÙˆØ¶
            const fList = document.getElementById('fard-list');
            fList.innerHTML = "";
            fardNames.forEach((p, i) => {
                let pName = (isFriday && i === 1) ? "Ø§Ù„Ø¬Ù…Ø¹Ø©" : p;
                fList.innerHTML += `
                    <div class="task-row">
                        <span><b>${pName}</b></span>
                        <div class="prayer-options">
                            <button class="opt-btn" onclick="setPr(this)">ğŸ•Œ Ù…Ø³Ø¬Ø¯</button>
                            <button class="opt-btn" onclick="setPr(this, 'fard')">ğŸ‘¤ ÙØ±Ø¯</button>
                            <button class="opt-btn" onclick="setPr(this, 'qada')">ğŸ•’ Ù‚Ø¶Ø§Ø¡</button>
                        </div>
                    </div>`;
            });

            // Ø§Ù„Ø³Ù†Ù†
            const sList = document.getElementById('sunnah-list');
            sList.innerHTML = `
                <div class="task-row"><span>Ø³Ù†Ø© Ø§Ù„ÙØ¬Ø±</span><input type="checkbox" class="t-chk" onchange="calc()"></div>
                <div class="task-row"><span>Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ</span><input type="checkbox" class="t-chk" onchange="calc()"></div>
            `;
            if(isFriday) {
                sList.innerHTML += `<div class="task-row" style="color:var(--emerald); font-weight:bold;"><span>Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù</span><input type="checkbox" class="t-chk" onchange="calc()"></div>`;
                document.getElementById('kahf-area').innerHTML = `<a href="https://quran.com/18" target="_blank" class="link-card" style="background:#fff9c4"><span>ğŸ•Œ Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù (Ù†ÙˆØ± Ø§Ù„Ø¬Ù…Ø¹Ø©)</span> ğŸ”—</a>`;
            } else { document.getElementById('kahf-area').innerHTML = ""; }

            renderPodium();
            calc();
        }

        function setPr(btn, type) {
            btn.parentElement.querySelectorAll('.opt-btn').forEach(b => b.className = 'opt-btn');
            btn.classList.add(type === 'fard' ? 'active-fard' : (type === 'qada' ? 'active-qada' : 'active-masjid'));
            calc();
        }

        function renderPodium() {
            const ui = document.getElementById('podium-ui');
            ui.innerHTML = "";
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© Ø­Ø³Ø¨ Ø§Ù„Ø³ÙƒÙˆØ± (Ø§Ù„Ø¨ÙˆØ¯ÙŠÙˆÙ… Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ: 2 Ø«Ù… 1 Ø«Ù… 3 Ø«Ù… 4)
            let sorted = [...family].sort((a,b) => b.score - a.score);
            let displayOrder = [sorted[1], sorted[0], sorted[2], sorted[3]]; 
            
            displayOrder.forEach((member, i) => {
                let stepClass = member === sorted[0] ? "step-1" : (member === sorted[1] ? "step-2" : (member === sorted[2] ? "step-3" : "step-4"));
                let medal = member === sorted[0] ? "ğŸ¥‡" : (member === sorted[1] ? "ğŸ¥ˆ" : (member === sorted[2] ? "ğŸ¥‰" : "ğŸ…"));
                
                ui.innerHTML += `
                    <div class="podium-step ${stepClass}">
                        <span class="medal">${medal}</span>
                        <span class="competitor-name">${member.name.split(' ')[0]}</span>
                        <span class="competitor-score">${member.score}%</span>
                    </div>`;
            });
        }

        function calc() {
            const total = 5 + document.querySelectorAll('.t-chk').length;
            const done = document.querySelectorAll('.active-masjid, .active-fard, .active-qada, .t-chk:checked').length;
            document.getElementById('remaining-count').innerText = total - done;
        }

        window.onload = () => {
            document.getElementById('main-calendar').valueAsDate = new Date();
            init();
        };
    </script>
</body>
</html>
